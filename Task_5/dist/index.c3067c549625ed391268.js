(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function u(t){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var u,r=n(t);if(a){var c=n(this).constructor;u=Reflect.construct(r,arguments,c)}else u=r.apply(this,arguments);return function(t,a){if(a&&("object"===e(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,u)}}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function r(t,a){for(var u=0;u<a.length;u++){var n=a[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,a){if("object"!==e(t)||null===t)return t;var u=t[Symbol.toPrimitive];if(void 0!==u){var n=u.call(t,"string");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===e(r)?r:String(r)),n)}var r}function c(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=c((function e(){o(this,e),this.execute=function(){},this.unexecute=function(){},this.setParams=function(){}})),i=function(e){t(n,e);var a=u(n);function n(e,t){var u;return o(this,n),(u=a.call(this)).calculator=e,u.operand=t,u.setParams=function(e,t){this.calculator=e,this.operand=t},u.execute=function(){this.calculator.add(this.operand)},u.unexecute=function(){this.calculator.substract(this.operand)},u}return c(n)}(l),s=function(e){t(n,e);var a=u(n);function n(e,t){var u;return o(this,n),(u=a.call(this)).calculator=e,u.operand=t,u.setParams=function(e,t){this.calculator=e,this.operand=t},u.execute=function(){this.calculator.subtract(this.operand)},u.unexecute=function(){this.calculator.add(this.operand)},u}return c(n)}(l),m=function(e){t(n,e);var a=u(n);function n(e,t){var u;return o(this,n),(u=a.call(this)).calculator=e,u.operand=t,u.setParams=function(e,t){this.calculator=e,this.operand=t},u.execute=function(){this.calculator.multiply(this.operand)},u.unexecute=function(){this.calculator.divide(this.operand)},u}return c(n)}(l),v=function(e){t(n,e);var a=u(n);function n(e,t){var u;return o(this,n),(u=a.call(this)).calculator=e,u.operand=t,u.setParams=function(e,t){this.calculator=e,this.operand=t},u.execute=function(){this.calculator.divide(this.operand)},u.unexecute=function(){this.calculator.multiply(this.operand)},u}return c(n)}(l),f=function(e){t(n,e);var a=u(n);function n(e,t){var u;return o(this,n),(u=a.call(this)).calculator=e,u.operand=t,u.setParams=function(e,t){this.calculator=e,this.operand=t},u.execute=function(){this.calculator.exp(this.operand)},u.unexecute=function(){this.calculator.cbrt(this.operand)},u}return c(n)}(l),h=function(e){t(n,e);var a=u(n);function n(e,t){var u;return o(this,n),(u=a.call(this)).calculator=e,u.operand=t,u.setParams=function(e,t){this.calculator=e,this.operand=t},u.execute=function(){this.calculator.cbrt(this.operand)},u.unexecute=function(){this.calculator.exp(this.operand)},u}return c(n)}(l),d=function(e){t(n,e);var a=u(n);function n(e){var t;return o(this,n),(t=a.call(this)).execute=function(){e.inv()},t.unexecute=function(){e.inv()},t}return c(n)}(l),b=function(e){t(n,e);var a=u(n);function n(e){var t;return o(this,n),(t=a.call(this)).execute=function(){e.signChange()},t.unexecute=function(){e.signChange()},t}return c(n)}(l),y=function(e){t(n,e);var a=u(n);function n(e){var t;return o(this,n),(t=a.call(this)).execute=function(){e.clear()},t}return c(n)}(l),p=function(e){t(n,e);var a=u(n);function n(e){var t;return o(this,n),(t=a.call(this)).execute=function(){e.factorial()},t}return c(n)}(l),g=function(e){t(n,e);var a=u(n);function n(e){var t;return o(this,n),(t=a.call(this)).calculator=e,t.execute=function(){e.memoryClear()},t}return c(n)}(l),k=function(e){t(n,e);var a=u(n);function n(e,t){var u;return o(this,n),(u=a.call(this)).calculator=e,u.execute=function(){e.memoryPlus(t)},u.unexecute=function(){e.memoryMinus(t)},u}return c(n)}(l),w=function(e){t(n,e);var a=u(n);function n(e,t){var u;return o(this,n),(u=a.call(this)).calculator=e,u.execute=function(){e.memoryMinus(t)},u.unexecute=function(){e.memoryPlus(t)},u}return c(n)}(l),x=function(e){t(n,e);var a=u(n);function n(e){var t;return o(this,n),(t=a.call(this)).calculator=e,t.execute=function(){return this.calculator.memoryRead()},t}return c(n)}(l);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function C(e,t){for(var a=0;a<t.length;a++){var u=t[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,(void 0,n=function(e,t){if("object"!==V(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var u=a.call(e,"string");if("object"!==V(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(u.key),"symbol"===V(n)?n:String(n)),u)}var n}var N=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentValue=0,this.memory=0,this.commands=[],this.command=null,this.flag=!1}var t,a;return t=e,(a=[{key:"add",value:function(e){this.currentValue+=e}},{key:"subtract",value:function(e){this.currentValue-=e}},{key:"multiply",value:function(e){this.currentValue*=e}},{key:"divide",value:function(e){if(0===e)throw Error("division by zero");this.currentValue/=e}},{key:"exp",value:function(e){this.currentValue=Math.pow(this.currentValue,e)}},{key:"cbrt",value:function(e){if(this.currentValue<0)throw Error("square root of negative number");this.currentValue=Math.pow(this.currentValue,1/e)}},{key:"inv",value:function(){if(0===this.currentValue)throw Error("division by zero");this.currentValue=1/this.currentValue}},{key:"percent",value:function(e){return 0===this.currentValue&&(this.currentValue=e/100*1),this.currentValue*(e/100)}},{key:"unpercent",value:function(e){this.currentValue/=1+e/100}},{key:"signChange",value:function(){this.currentValue=-this.currentValue}},{key:"clear",value:function(){this.currentValue=0}},{key:"factorial",value:function(){if(!Number.isInteger(this.currentValue))throw Error("factorial is available only for integers");for(var e=this.currentValue,t=1,a=1;a<=e;a+=1)t*=a;this.currentValue=t}},{key:"memoryClear",value:function(){this.memory=0}},{key:"memoryRead",value:function(){if(0!==this.memory)return this.memory;console.warn("Memory is empty")}},{key:"memorySave",value:function(e){this.memory=e}},{key:"memoryPlus",value:function(e){this.memory+=e}},{key:"memoryMinus",value:function(e){this.memory-=e}},{key:"getResult",value:function(){return this.currentValue}},{key:"setValue",value:function(e){this.currentValue=e}},{key:"changeFlag",value:function(e){this.flag=e}},{key:"pushCommand",value:function(e){this.commands.push(e),this.command=e}}])&&C(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()),P=document.getElementsByClassName("calculator__input")[0],_=document.getElementsByClassName("calculator__body")[0],E="black";_.addEventListener("click",(function(e){switch(e.target.className.split(" ")[1]){case"item1":N.setValue(Number(P.value)),N.pushCommand(new f(N,2)),N.command.execute(),P.value=N.getResult();break;case"item2":N.setValue(Number(P.value)),N.pushCommand(new d(N)),N.command.execute(),P.value=N.getResult();break;case"item3":N.pushCommand(new x(N)),P.value=N.command.execute();break;case"item4":N.pushCommand(new y(N)),N.command.execute(),P.value="0",N.changeFlag(!1);break;case"item5":N.setValue(Number(P.value)),N.pushCommand(new b(N)),N.command.execute(),P.value=N.getResult();break;case"item6":0===N.getResult()?(N.percent(Number(P.value)),P.value=N.getResult()):P.value=N.percent(Number(P.value));break;case"item7":N.flag?(N.command.setParams(N,Number(P.value)),N.command.execute()):(N.setValue(Number(P.value)),N.changeFlag(!0)),N.pushCommand(new v),P.value="0";break;case"item8":N.setValue(Number(P.value)),N.pushCommand(new f(N,3)),N.command.execute(),P.value=N.getResult();break;case"item9":N.setValue(Number(P.value)),N.pushCommand(new h(N,2)),N.command.execute(),P.value=N.getResult();break;case"item10":N.pushCommand(new k(N,Number(P.value))),N.command.execute(),P.value="0";break;case"item11":"0"===P.value?P.value="7":P.value+="7";break;case"item12":"0"===P.value?P.value="8":P.value+="8";break;case"item13":"0"===P.value?P.value="9":P.value+="9";break;case"item14":N.flag?(N.command.setParams(N,Number(P.value)),N.command.execute()):(N.setValue(Number(P.value)),N.changeFlag(!0)),N.pushCommand(new m),P.value="0";break;case"item15":N.flag?(N.command.setParams(N,Number(P.value)),N.command.execute()):(N.setValue(Number(P.value)),N.changeFlag(!0)),N.pushCommand(new f),P.value="0";break;case"item16":N.setValue(Number(P.value)),N.pushCommand(new h(N,3)),N.command.execute(),P.value=N.getResult();break;case"item17":N.pushCommand(new w(N,Number(P.value))),N.command.execute(),P.value="0";break;case"item18":"0"===P.value?P.value="4":P.value+="4";break;case"item19":"0"===P.value?P.value="5":P.value+="5";break;case"item20":"0"===P.value?P.value="6":P.value+="6";break;case"item21":N.flag?(N.command.setParams(N,Number(P.value)),N.command.execute(),P.value="0"):"0"===P.value?P.value="-":(N.setValue(Number(P.value)),N.changeFlag(!0),P.value="0"),N.pushCommand(new s);break;case"item22":N.setValue(Number(P.value)),N.pushCommand(new p(N)),N.command.execute(),P.value=N.getResult();break;case"item23":N.flag?(N.command.setParams(N,Number(P.value)),N.command.execute()):(N.setValue(Number(P.value)),N.changeFlag(!0)),N.pushCommand(new h),P.value="0";break;case"item24":N.pushCommand(new g(N)),N.command.execute();break;case"item25":"0"===P.value?P.value="1":P.value+="1";break;case"item26":"0"===P.value?P.value="2":P.value+="2";break;case"item27":"0"===P.value?P.value="3":P.value+="3";break;case"item28":N.flag?(N.command.setParams(N,Number(P.value)),N.command.execute()):(N.setValue(Number(P.value)),N.changeFlag(!0)),N.pushCommand(new i),P.value="0";break;case"item29":"black"===E?(document.querySelectorAll(".item").forEach((function(e){e.classList.add("item-white")})),document.getElementsByClassName("calculator__body")[0].classList.add("calculator__body-white"),document.getElementsByClassName("calculator")[0].classList.add("calculator-white"),document.getElementsByClassName("calculator__header")[0].classList.add("calculator__header-white"),document.querySelectorAll(".item-number").forEach((function(e){e.classList.add("item-number-white")})),E="white"):(document.querySelectorAll(".item").forEach((function(e){e.classList.remove("item-white")})),document.getElementsByClassName("item")[0].classList.add("item-white"),document.getElementsByClassName("calculator__body")[0].classList.remove("calculator__body-white"),document.getElementsByClassName("calculator")[0].classList.remove("calculator-white"),document.getElementsByClassName("calculator__header")[0].classList.remove("calculator__header-white"),document.querySelectorAll(".item-number").forEach((function(e){e.classList.remove("item-number-white")})),E="black");break;case"item30":"0"!==P.value&&(P.value+="0");break;case"item31":P.value+=".";break;case"item32":N.flag&&(N.command.setParams(N,Number(P.value)),N.command.execute(),P.value=N.getResult(),N.changeFlag(!1))}})),document.addEventListener("keydown",(function(e){switch(e.key){case"1":"0"===P.value?P.value="1":P.value+="1";break;case"2":"0"===P.value?P.value="2":P.value+="2";break;case"3":"0"===P.value?P.value="3":P.value+="3";break;case"4":"0"===P.value?P.value="4":P.value+="4";break;case"5":"0"===P.value?P.value="5":P.value+="5";break;case"6":"0"===P.value?P.value="6":P.value+="6";break;case"7":"0"===P.value?P.value="7":P.value+="7";break;case"8":"0"===P.value?P.value="8":P.value+="8";break;case"9":"0"===P.value?P.value="9":P.value+="9";break;case"0":"0"!==P.value&&(P.value+="0");break;case".":P.value+="."}}))})();